{% extends "base.html" %}
{% load static %}
{% block content %}

<section id="productos" class="container py-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-center flex-grow-1">ğŸŒ± Nuestros Productos</h2>
    <!-- BotÃ³n solo visible para admin -->
    {% if user.is_staff %}
      <a href="{% url 'crear_producto' %}" class="btn btn-success">
        â• Crear producto
      </a>
    {% endif %}
  </div>

  <div class="row gx-4 gy-5 justify-content-start">

    <!-- Card 1 -->
    <div class="col-12 col-md-4">
      <div class="card h-100 shadow-sm">
        <img src="{% static 'images/bateria.jpg' %}" class="card-img-top" alt="BaterÃ­a de almacenamiento">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">BaterÃ­a de Almacenamiento</h5>
          <p class="card-text">Unidad industrial de baterÃ­as de litio para almacenamiento energÃ©tico a gran escala...</p>
          <p class="text-success fw-bold">Precio: $18.500.000 ARS</p>
          <p class="text-warning">â­ Promedio: 4.7 / 5</p>
          <div class="mt-auto d-flex justify-content-between">
            <a href="{% url 'detalle_producto' 1 %}" class="btn btn-primary btn-sm">ğŸ” Ver detalle</a>
            <button class="btn btn-outline-success btn-sm add-to-cart" data-product="BaterÃ­a de Almacenamiento" data-price="18500000" data-product-id="1">ğŸ›’ Agregar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Card 2 -->
    <div class="col-12 col-md-4">
      <div class="card h-100 shadow-sm">
        <img src="{% static 'images/turbina-real1.jpg' %}" class="card-img-top" alt="Turbina eÃ³lica">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">Turbina EÃ³lica</h5>
          <p class="card-text">Turbina de alto rendimiento capaz de abastecer hasta 16.000 hogares...</p>
          <p class="text-success fw-bold">Precio: $16.800.000 ARS</p>
          <p class="text-warning">â­ Promedio: 4.6 / 5</p>
          <div class="mt-auto d-flex justify-content-between">
            <a href="{% url 'detalle_producto' 2 %}" class="btn btn-primary btn-sm">ğŸ” Ver detalle</a>
            <button class="btn btn-outline-success btn-sm add-to-cart" data-product="Turbina EÃ³lica" data-price="16800000" data-product-id="2">ğŸ›’ Agregar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Card 3 -->
    <div class="col-12 col-md-4">
      <div class="card h-100 shadow-sm">
        <img src="{% static 'images/panel-solar2.jpg' %}" class="card-img-top" alt="Panel solar">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">Panel Solar</h5>
          <p class="card-text">Panel solar de alta eficiencia, diseÃ±ado para captar la energÃ­a del sol...</p>
          <p class="text-success fw-bold">Precio: $600.000 ARS</p>
          <p class="text-warning">â­ Promedio: 4.6 / 5</p>
          <div class="mt-auto d-flex justify-content-between">
            <a href="{% url 'detalle_producto' 3 %}" class="btn btn-primary btn-sm">ğŸ” Ver detalle</a>
            <button class="btn btn-outline-success btn-sm add-to-cart" data-product="Panel Solar" data-price="600000" data-product-id="3">ğŸ›’ Agregar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Card 4 -->
    <div class="col-12 col-md-4">
      <div class="card h-100 shadow-sm">
        <img src="{% static 'images/panel-solar4.jpg' %}" class="card-img-top" alt="Panel solar residencial">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">Panel Solar Residencial</h5>
          <p class="card-text">Sistema solar diseÃ±ado para instalarse en techos inclinados...</p>
          <p class="text-success fw-bold">Precio: $800.000 ARS</p>
          <p class="text-warning">â­ Promedio: 4.6 / 5</p>
          <div class="mt-auto d-flex justify-content-between">
            <a href="{% url 'detalle_producto' 4 %}" class="btn btn-primary btn-sm">ğŸ” Ver detalle</a>
            <button class="btn btn-outline-success btn-sm add-to-cart" data-product="Panel Solar Residencial" data-price="800000" data-product-id="4">ğŸ›’ Agregar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Card 5 -->
    <div class="col-12 col-md-4">
      <div class="card h-100 shadow-sm">
        <img src="{% static 'images/turbina-real2.jpg' %}" class="card-img-top" alt="Turbina eÃ³lica urbana">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">Turbina EÃ³lica Urbana</h5>
          <p class="card-text">Turbina silenciosa y eficiente, pensada para generar energÃ­a limpia en zonas urbanas...</p>
          <p class="text-success fw-bold">Precio: $12.500.000 ARS</p>
          <p class="text-warning">â­ Promedio: 4.6 / 5</p>
          <div class="mt-auto d-flex justify-content-between">
            <a href="{% url 'detalle_producto' 5 %}" class="btn btn-primary btn-sm">ğŸ” Ver detalle</a>
            <button class="btn btn-outline-success btn-sm add-to-cart" data-product="Turbina EÃ³lica Urbana" data-price="12500000" data-product-id="5">ğŸ›’ Agregar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Card 6 -->
    <div class="col-12 col-md-4">
      <div class="card h-100 shadow-sm">
        <img src="{% static 'images/bateria2.jpg' %}" class="card-img-top" alt="BaterÃ­a industrial">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">BaterÃ­a de Almacenamiento Industrial</h5>
          <p class="card-text">BaterÃ­a de alto rendimiento diseÃ±ada para almacenar energÃ­a elÃ©ctrica en grandes volÃºmenes...</p>
          <p class="text-success fw-bold">Precio: $12.000.000 ARS</p>
          <p class="text-warning">â­ Promedio: 4.6 / 5</p>
          <div class="mt-auto d-flex justify-content-between">
            <a href="{% url 'detalle_producto' 6 %}" class="btn btn-primary btn-sm">ğŸ” Ver detalle</a>
            <button class="btn btn-outline-success btn-sm add-to-cart" data-product="BaterÃ­a de Almacenamiento Industrial" data-price="12000000" data-product-id="6">ğŸ›’ Agregar</button>
          </div>
        </div>
      </div>
    </div>

     <!-- Card 7 -->
    <div class="col-12 col-md-4">
      <div class="card h-100 shadow-sm">
        <img src="{% static 'images/panel-solar5.jpg' %}" class="card-img-top" alt="Estructura solar residencial fija">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">Estructura Solar Residencial Fija</h5>
          <p class="card-text">Sistema solar montado sobre estructura fija, ideal para generar electricidad limpia en espacios abiertos...</p>
          <p class="text-success fw-bold">Precio: $900.000 ARS</p>
          <p class="text-warning">â­ Promedio: 4.6 / 5</p>
          <div class="mt-auto d-flex justify-content-between">
            <a href="{% url 'detalle_producto' 7 %}" class="btn btn-primary btn-sm">ğŸ” Ver detalle</a>
            <button class="btn btn-outline-success btn-sm add-to-cart" data-product="Estructura Solar Residencial Fija" data-price="900000" data-product-id="7">

                <!-- Card 13 -->
    <div class="col-12 col-md-4">
      <div class="card h-100 shadow-sm">
        <img src="{% static 'images/camarasolar3.jpeg' %}" class="card-img-top" alt="CÃ¡mara solar exterior">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">CÃ¡mara Solar de Seguridad Exterior</h5>
          <p class="card-text">CÃ¡mara de seguridad con alimentaciÃ³n solar, visiÃ³n nocturna y conexiÃ³n inalÃ¡mbrica...</p>
          <p class="text-success fw-bold">Precio: $300.000 ARS</p>
          <p class="text-warning">â­ Promedio: 4.6 / 5</p>
          <div class="mt-auto d-flex justify-content-between">
            <a href="{% url 'detalle_producto' 13 %}" class="btn btn-primary btn-sm">ğŸ” Ver detalle</a>
            <button class="btn btn-outline-success btn-sm add-to-cart" data-product="CÃ¡mara Solar de Seguridad Exterior" data-price="300000" data-product-id="13">ğŸ›’ Agregar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Card 14 -->
    <div class="col-12 col-md-4">
      <div class="card h-100 shadow-sm">
        <img src="{% static 'images/mochila3.jpeg' %}" class="card-img-top" alt="Mochila solar">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">Mochila Solar</h5>
          <p class="card-text">Mochila resistente con panel solar frontal que permite cargar dispositivos en movimiento...</p>
          <p class="text-success fw-bold">Precio: $250.000 ARS</p>
          <p class="text-warning">â­ Promedio: 4.6 / 5</p>
          <div class="mt-auto d-flex justify-content-between">
            <a href="{% url 'detalle_producto' 14 %}" class="btn btn-primary btn-sm">ğŸ” Ver detalle</a>
            <button class="btn btn-outline-success btn-sm add-to-cart" data-product="Mochila Solar" data-price="250000" data-product-id="14">ğŸ›’ Agregar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Card 15 -->
    <div class="col-12 col-md-4">
      <div class="card h-100 shadow-sm">
        <img src="{% static 'images/camarasolar4.jpeg' %}" class="card-img-top" alt="CÃ¡mara solar exterior">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">CÃ¡mara Solar de Seguridad Exterior</h5>
          <p class="card-text">CÃ¡mara de seguridad autÃ³noma con visiÃ³n nocturna, sensores de movimiento y alimentaciÃ³n solar...</p>
          <p class="text-success fw-bold">Precio: $250.000 ARS</p>
          <p class="text-warning">â­ Promedio: 4.6 / 5</p>
          <div class="mt-auto d-flex justify-content-between">
            <a href="{% url 'detalle_producto' 15 %}" class="btn btn-primary btn-sm">ğŸ” Ver detalle</a>
            <button class="btn btn-outline-success btn-sm add-to-cart" data-product="CÃ¡mara Solar de Seguridad Exterior" data-price="250000" data-product-id="15">ğŸ›’ Agregar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Card 16 -->
    <div class="col-12 col-md-4">
      <div class="card h-100 shadow-sm">
        <img src="{% static 'images/mochila3.jpeg' %}" class="card-img-top" alt="Mochila solar roja">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">Mochila Solar Roja</h5>
          <p class="card-text">Mochila resistente con panel solar desmontable o integrado, diseÃ±ada para generar energÃ­a mientras te desplazÃ¡s...</p>
          <p class="text-success fw-bold">Precio: $250.000 ARS</p>
          <p class="text-warning">â­ Promedio: 4.6 / 5</p>
          <div class="mt-auto d-flex justify-content-between">
            <a href="{% url 'detalle_producto' 16 %}" class="btn btn-primary btn-sm">ğŸ” Ver detalle</a>
            <button class="btn btn-outline-success btn-sm add-to-cart" data-product="Mochila Solar Roja" data-price="250000" data-product-id="16">ğŸ›’ Agregar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Card 17 -->
    <div class="col-12 col-md-4">
      <div class="card h-100 shadow-sm">
        <img src="{% static 'images/Termotanque.jpeg' %}" class="card-img-top" alt="Termotanque solar">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">Termotanque Solar</h5>
          <p class="card-text">Sistema solar tÃ©rmico que utiliza tubos evacuados para captar el calor del sol y calentar agua...</p>
          <p class="text-success fw-bold">Precio: $20.000.000 ARS</p>
          <p class="text-warning">â­ Promedio: 4.6 / 5</p>
          <div class="mt-auto d-flex justify-content-between">
            <a href="{% url 'detalle_producto' 17 %}" class="btn btn-primary btn-sm">ğŸ” Ver detalle</a>
            <button class="btn btn-outline-success btn-sm add-to-cart" data-product="Termotanque Solar" data-price="20000000" data-product-id="17">ğŸ›’ Agregar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Card 18 -->
    <div class="col-12 col-md-4">
      <div class="card h-100 shadow-sm">
        <img src="{% static 'images/termotanque2.jpeg' %}" class="card-img-top" alt="Termotanque solar chico">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">Termotanque Solar Chico</h5>
          <p class="card-text">Sistema solar tÃ©rmico confiable y duradero, ideal para reducir el consumo de gas o electricidad...</p>
          <p class="text-success fw-bold">Precio: $18.000.000 ARS</p>
          <p class="text-warning">â­ Promedio: 4.6 / 5</p>
          <div class="mt-auto d-flex justify-content-between">
            <a href="{% url 'detalle_producto' 18 %}" class="btn btn-primary btn-sm">ğŸ” Ver detalle</a>
            <button class="btn btn-outline-success btn-sm add-to-cart" data-product="Termotanque Solar Chico" data-price="18000000" data-product-id="18">ğŸ›’ Agregar</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const botones = document.querySelectorAll(".add-to-cart");

    botones.forEach(boton => {
      boton.addEventListener("click", () => {
        const nombre = boton.dataset.product;
        const precio = parseFloat(boton.dataset.price);
        const id = boton.dataset.productId;

        let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
        let existente = carrito.find(item => item.id === id);

        if (existente) {
          existente.cantidad += 1;
        } else {
          carrito.push({ id, nombre, precio, cantidad: 1 });
        }

        localStorage.setItem("carrito", JSON.stringify(carrito));
        alert(`${nombre} agregado al carrito âœ…`);
      });
    });
  });
</script>

{% endblock %}
